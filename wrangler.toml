name = "indexnow-worker"
main = "src/index.ts"
compatibility_date = "2024-01-10"

# Worker 配置
workers_dev = true
account_id = "your-cloudflare-account-id"

# KV 命名空间
[[kv_namespaces]]
binding = "CACHE"
id = "your-kv-namespace-id"

# 环境变量（单网站模式 - 向后兼容，可选）
[vars]
SITEMAP_URL = "https://example.com/sitemap.xml"
SITE_HOST = "example.com"
MAX_CONCURRENT_REQUESTS = "3"
REQUEST_INTERVAL_MS = "100"
CACHE_TTL_DAYS = "30"
MAX_RETRIES = "3"
CRON_SCHEDULE = "0 */6 * * *"

# 密钥（使用 wrangler secret put 命令添加）
# wrangler secret put INDEXNOW_API_KEY
# 输入你的 IndexNow API Key（32位十六进制字符）

# Cron 触发器
[triggers]
crons = ["0 */6 * * *"] # 每 6 小时执行一次
